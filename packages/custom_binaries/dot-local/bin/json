#!/usr/bin/env bash

usage() {
    echo "Usage: json [-h|--help] FILENAME

Show the content of a JSON file."
}

if [ -z "$1" ]; then
    usage
    exit 0
elif [ "$1" == '-h' ] || [ "$1" == '--help' ]; then
    usage
    exit 0
fi

command -v jq > /dev/null || { echo "Command jq is not recognised"; exit 1; }

out="$(jq --color-output . "$1")"
code="$?"
if [ "$code" == 0 ]; then
    echo "$out" | less -R
else
    exit "$code"
fi

